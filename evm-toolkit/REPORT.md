# EVM Toolkit å¼€å‘æŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°

EVM Toolkit æ˜¯ä¸€å¥—åŸºäº ethers.js v6 çš„ EVM é“¾ä¸Šé’±åŒ…ç®¡ç†ä¸æ‰¹é‡æ“ä½œå·¥å…·é›†ï¼Œæ”¯æŒé’±åŒ…ç”Ÿæˆã€ä½™é¢æŸ¥è¯¢ã€æ‰¹é‡è½¬è´¦ã€èµ„é‡‘å½’é›†ã€åœ°å€éªŒè¯ã€æ ‡ç­¾ç®¡ç†ç­‰åŠŸèƒ½ã€‚

- ä½ç½®ï¼š`skills/evm-toolkit/`
- è¿è¡Œæ—¶ï¼šNode.js v22 + ethers.js 6.16.0
- æ–‡ä»¶æ•°ï¼š12 ä¸ª JS è„šæœ¬ + 3 ä¸ª Shell è„šæœ¬ + 1 ä¸ªæµ‹è¯•æ–‡ä»¶
- å®¡æŸ¥è½®æ¬¡ï¼š18+ è½®
- ä¿®å¤é—®é¢˜ï¼š60+ ä¸ª
- æµ‹è¯•ç”¨ä¾‹ï¼š77 ä¸ª
- æ”¯æŒç½‘ç»œï¼šEthereum, Base, BNB Chain, Arbitrum, Polygon, Sepolia

---

## æ¶æ„

```
evm-toolkit/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ evm-common.js          # å…¬å…±æ¨¡å—ï¼ˆå¸¸é‡/ABI/å·¥å…·å‡½æ•°/Gasç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ evm.js                 # ç»Ÿä¸€è·¯ç”±å…¥å£ï¼ˆ11ä¸ªå­å‘½ä»¤ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ evm-wallet-gen.js      # å•é’±åŒ…ç”Ÿæˆï¼ˆéšæœº/åŠ©è®°è¯æ´¾ç”Ÿï¼‰
â”‚   â”œâ”€â”€ evm-batch-gen.js       # æ‰¹é‡ç”Ÿæˆï¼ˆJSON/CSV/Listå¯¼å‡ºï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ evm-balance.js         # å•åœ°å€/æ‰¹é‡ä½™é¢æŸ¥è¯¢ï¼ˆä»£å¸ä¿¡æ¯ç¼“å­˜ï¼‰
â”‚   â”œâ”€â”€ evm-batch-query.js     # æ‰¹é‡ä½™é¢æŸ¥è¯¢ï¼ˆMulticall3 ä¼˜åŒ–ï¼‰
â”‚   â”œâ”€â”€ evm-info.js            # åœ°å€è¯¦ç»†ä¿¡æ¯ï¼ˆç±»å‹/nonce/ä»£å¸ï¼‰
â”‚   â”œâ”€â”€ evm-tx-history.js      # äº¤æ˜“å†å²ï¼ˆEtherscan APIï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ evm-batch-transfer.js  # æ‰¹é‡è½¬è´¦ï¼ˆETH/ERC20ï¼Œæ–­ç‚¹ç»­ä¼ ï¼‰
â”‚   â”œâ”€â”€ evm-collect.js         # èµ„é‡‘å½’é›†ï¼ˆETH/ERC20ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ evm-labels.js          # åœ°å€æ ‡ç­¾ç®¡ç†ï¼ˆCRUD/å¯¼å…¥å¯¼å‡ºï¼‰
â”‚   â”œâ”€â”€ evm-validate.js        # åœ°å€éªŒè¯ï¼ˆæ ¼å¼/æ ¡éªŒå’Œï¼‰
â”‚   â”œâ”€â”€ evm-extract-addresses.js # ä»é’±åŒ…æ–‡ä»¶æå–åœ°å€åˆ—è¡¨
â”‚   â”‚
â”‚   â”œâ”€â”€ evm-manager.sh         # äº¤äº’å¼èœå•ç®¡ç†
â”‚   â”œâ”€â”€ evm-init.sh            # ä¸€é”®åˆå§‹åŒ–
â”‚   â””â”€â”€ evm-backup.sh          # å¤‡ä»½è„šæœ¬
â”œâ”€â”€ test.js                    # è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆ77ç”¨ä¾‹ï¼‰
â”œâ”€â”€ SKILL.md                   # ä½¿ç”¨æ–‡æ¡£
â””â”€â”€ node_modules/ethers/       # ä¾èµ–
```

### æ ¸å¿ƒè®¾è®¡

- **evm-common.js** ç»Ÿä¸€ç®¡ç†ï¼šRPCåœ°å€ã€vaultè·¯å¾„ã€ERC20 ABIã€é’±åŒ…åŠ è½½ã€æ–‡ä»¶è¯»å–ã€Gas ç®¡ç†ï¼ˆä¸‰å±‚ä¿æŠ¤ï¼‰
- **vault/** å­˜æ”¾æ•æ„Ÿæ•°æ®ï¼ˆç§é’¥/åŠ©è®°è¯ï¼‰ï¼Œæƒé™ 600/700ï¼Œæ°¸ä¸è¿› LLM ä¸Šä¸‹æ–‡
- æ‰€æœ‰è„šæœ¬æ”¯æŒ `--help`ã€`--dry-run`ï¼ˆè½¬è´¦ç±»ï¼‰ã€`--rpc` è‡ªå®šä¹‰èŠ‚ç‚¹
- **Gas å¿«æ·é…ç½®**ï¼š`/tmp/evm-gas-config.json`ï¼Œé€šè¿‡ `loadGasConfig()`/`saveGasConfig()` ç®¡ç†ï¼Œæƒé™ 0o600
- **Telegram é›†æˆ**ï¼šGas é¢æ¿ï¼ˆinline buttonsï¼‰ã€æ–‡æœ¬å‘½ä»¤ï¼ˆ`gas war`/`gas normal`/`gas 0.05`ï¼‰

---

## æ–°å¢åŠŸèƒ½

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½ï¼ˆåŸå§‹å¼€å‘ï¼‰

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| Gas å¼‚å¸¸ç¡®è®¤ | è¶…é˜ˆå€¼ï¼ˆETH 0.0005/ç¬”ï¼ŒERC20 0.001/ç¬”ï¼‰æ—¶äº¤äº’ç¡®è®¤ |
| Gas 10% ä½™é‡ | å½’é›†æ—¶é¢„ç•™ gas æ³¢åŠ¨ç©ºé—´ |
| loadMainWallet å‚æ•°åŒ– | `requireKey=true/false`ï¼Œå½’é›†åªéœ€åœ°å€ |
| ç»Ÿä¸€è·¯ç”±è¡¥å…¨ | evm.js 11 ä¸ªå­å‘½ä»¤å…¨éƒ¨å¯è¾¾ |

### ç¬¬äºŒé˜¶æ®µï¼šGas ç®¡ç†ç³»ç»Ÿ

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| `--gas-price` | æ‰‹åŠ¨æŒ‡å®š Gweiï¼Œè¦†ç›–ç½‘ç»œè‡ªåŠ¨è·å– |
| `--max-fee` | å•ç¬”æœ€å¤§ gas è´¹ç”¨ç¡¬ä¸Šé™ï¼ˆé»˜è®¤ 0.005 ETH/ç¬”ï¼‰ |
| `--gas-war` | å–æ¶ˆç¡¬ä¸Šé™ï¼Œé€‚ç”¨äºæŠ¢è·‘/ç´§æ€¥åœºæ™¯ |
| `--resume` | æ–­ç‚¹ç»­ä¼ ï¼šè¿›åº¦æ–‡ä»¶ + ç´¢å¼•è®¡æ•° + æ—§è¿›åº¦ append + nonce æ ¡éªŒ |
| Gas å¿«æ·é…ç½® | `/tmp/evm-gas-config.json`ï¼Œ`loadGasConfig()`/`saveGasConfig()` æƒé™ 0o600 |
| Telegram Gas é¢æ¿ | inline buttonsï¼Œè§¦å‘è¯ "gasè®¾ç½®"/"gasé¢æ¿" |
| Telegram æ–‡æœ¬å‘½ä»¤ | `gas war` / `gas normal` / `gas 0.05` |
| ä¸‰å±‚ Gas ä¿æŠ¤ | â‘  è­¦å‘Šè¶…é˜ˆå€¼ â‘¡ ç¡¬ä¸Šé™ max-fee è‡ªåŠ¨ç»ˆæ­¢ â‘¢ Gas War å–æ¶ˆé™åˆ¶ |
| è¶…é™æç¤º | "å½“å‰gasè¶…è¿‡max feeï¼Œè¯·è¾“å…¥ã€gas è®¾ç½®ã€‘å”¤é†’è®¾ç½®é¢æ¿" |

### ç¬¬ä¸‰é˜¶æ®µï¼šMulticall3 æ‰¹é‡æŸ¥è¯¢

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| Multicall3 è‡ªåŠ¨å¯ç”¨ | evm-batch-query.js 3+ åœ°å€è‡ªåŠ¨ä½¿ç”¨ Multicall3 åˆçº¦æ‰¹é‡æŸ¥è¯¢ |
| ä¼˜é›…é™çº§ | Multicall3 ä¸å¯ç”¨æ—¶è‡ªåŠ¨å›é€€é€ä¸ªæŸ¥è¯¢ |

### ç¬¬å››é˜¶æ®µï¼šä»£å¸ä¿¡æ¯ç¼“å­˜

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| symbol/decimals ç¼“å­˜ | evm-balance.js batchQuery ä»£å¸ symbol/decimals åªæŸ¥ä¸€æ¬¡ï¼Œé¿å…é‡å¤ RPC è°ƒç”¨ |

### ç¬¬äº”é˜¶æ®µï¼šç½‘ç»œæ‰©å±•

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| å¤šé“¾æ”¯æŒ | Ethereum, Base, BNB Chain, Arbitrum, Polygon, Sepolia |
| ç»Ÿä¸€åˆ‡æ¢ | `--network` å‚æ•°æˆ– Telegram å‘½ä»¤åˆ‡æ¢ |

### Gas ç¡®è®¤æœåŠ¡æ¢ç´¢ä¸åºŸå¼ƒ

åœ¨å®ç° Gas ç®¡ç†çš„è¿‡ç¨‹ä¸­ï¼Œç»å†äº†å¤šæ¬¡æ–¹æ¡ˆæ¢ç´¢ï¼š

| æ–¹æ¡ˆ | ç»“æœ | åŸå›  |
|------|------|------|
| ç‹¬ç«‹ Node.js æœåŠ¡ getUpdates | âŒ å¤±è´¥ | ä¸ OpenClaw ç«äº‰ Telegram updates |
| AI callbackï¼ˆwake â†’ å‘æŒ‰é’® â†’ ç”¨æˆ·ç‚¹å‡» â†’ å†™æ–‡ä»¶ï¼‰ | âš ï¸ å¯è¡Œä½†å¼ƒç”¨ | 5-8 ç§’å»¶è¿Ÿï¼Œä½“éªŒå·® |
| ç¬¬äºŒä¸ª Telegram bot | âŒ ç”¨æˆ·æ‹’ç» | ä¸æƒ³åˆ‡çª—å£ |
| **è­¦å‘Š + max-fee ç¡¬ä¸Šé™** | âœ… æœ€ç»ˆæ–¹æ¡ˆ | é›¶å»¶è¿Ÿï¼Œè‡ªåŠ¨åŒ–å‹å¥½ |

---

## æ·±åº¦å®¡æŸ¥ï¼ˆ4 è½®ï¼‰

åœ¨åŸå§‹ 14+ è½®å®¡æŸ¥åŸºç¡€ä¸Šï¼Œåˆè¿›è¡Œäº† 4 è½®æ·±åº¦å®¡æŸ¥ï¼š

### ç¬¬ä¸€è½®ï¼š2 ä¸¥é‡ / 4 ä¸­ç­‰ / 10 ä½

- ğŸ”´ nonce å¤±è´¥åä»é€’å¢ â†’ å¤±è´¥æ—¶ä¸é€’å¢ nonce
- ğŸ”´ gasPrice æœªä¼ å…¥äº¤æ˜“å¯¹è±¡ â†’ ä¿®å¤ä¼ å‚
- ğŸŸ¡ æ–­ç‚¹ç»­ä¼ åœ°å€å»é‡é€»è¾‘é”™è¯¯ â†’ é‡å†™å»é‡
- ğŸŸ¡ tx-history æ— è¶…æ—¶ â†’ æ·»åŠ è¶…æ—¶
- ğŸŸ¡ labels å¤§å°å†™ä¸ä¸€è‡´ â†’ ç»Ÿä¸€å°å†™
- ğŸŸ¡ evm-manager è¾“å…¥æ ¡éªŒç¼ºå¤± â†’ æ·»åŠ æ ¡éªŒ

### ç¬¬äºŒè½®ï¼š2 ä¸¥é‡ / 6 ä¸­ç­‰

- ğŸ”´ æ–­ç‚¹ç»­ä¼ ç”¨ success è®¡æ•°è€Œéæ€»è®°å½•æ•° â†’ æ”¹ç”¨æ€»è®°å½•ç´¢å¼•
- ğŸ”´ sub-wallets å¤‡ä»½æœª chmod 600 â†’ æ·»åŠ æƒé™è®¾ç½®
- ğŸŸ¡ ç»­ä¼ è¿›åº¦æ–‡ä»¶ä¸¢å¤±é£é™© â†’ åŸå­å†™å…¥
- ğŸŸ¡ clearTimeout ä½ç½®ä¸å½“ â†’ è°ƒæ•´åˆ°æ­£ç¡®ä½ç½®
- ğŸŸ¡ apiKey æœª URL ç¼–ç  â†’ encodeURIComponent

### ç¬¬ä¸‰è½®ï¼š1 ä¸¥é‡

- ğŸ”´ æ–­ç‚¹ç»­ä¼  nonce è¾¹ç•Œé—®é¢˜ï¼ˆäº¤æ˜“ä¸Šé“¾ä½†è¿›åº¦æœªä¿å­˜ï¼‰â†’ æ¢å¤æ—¶æ ¡éªŒé“¾ä¸Š nonce

### ç¬¬å››è½®ï¼š0 ä¸¥é‡

- ğŸŸ¡ evm-confirm-service.js ç¡¬ç¼–ç  CHAT_ID â†’ å·²ç§»é™¤åºŸå¼ƒæ–‡ä»¶

---

## Bug å¤ç›˜ï¼šå…¨é‡æ±‡æ€»ï¼ˆ60+ ä¸ªï¼‰

æ‰€æœ‰é—®é¢˜æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»ï¼ŒåŒ…å«åŸå§‹å®¡æŸ¥ 38 ä¸ª + æ·±åº¦å®¡æŸ¥ 4 è½®æ–°å¢é—®é¢˜ã€‚

### ğŸ”´ ä¸¥é‡ï¼ˆä¼šå¯¼è‡´èµ„é‡‘æŸå¤±æˆ–å®‰å…¨é£é™©ï¼‰â€” 13 ä¸ª

| # | é—®é¢˜ | æ¥æº | æ–‡ä»¶ | ä¿®å¤æ–¹å¼ |
|---|------|------|------|----------|
| 1 | sha256 ç”Ÿæˆå‡åœ°å€ï¼ˆé keccak256/secp256k1ï¼‰ | åŸå§‹å®¡æŸ¥ | evm-wallet-generator.js | åˆ é™¤æ–‡ä»¶ï¼Œç”¨ ethers.js é‡å†™ |
| 2 | HD æ´¾ç”Ÿ `hdNode.derivePath()` åœ¨ ethers v6 ä¸å­˜åœ¨ | åŸå§‹å®¡æŸ¥ | evm-wallet-gen.js | æ”¹ç”¨ `HDNodeWallet.fromPhrase()` |
| 3 | ERC20 ç”¨ `parseEther`/`formatEther` å¿½ç•¥ä»£å¸ç²¾åº¦ | åŸå§‹å®¡æŸ¥ | å¤šä¸ªæ–‡ä»¶ | æ”¹ç”¨ `parseUnits`/`formatUnits` + å®é™… decimals |
| 4 | æ‰¹é‡è½¬è´¦æ—  nonce ç®¡ç†ï¼Œå¹¶å‘ nonce å†²çª | åŸå§‹å®¡æŸ¥ | evm-batch-transfer.js | æ‰‹åŠ¨ `nonce++` |
| 5 | ETH è½¬è´¦ä½™é¢æ£€æŸ¥ä¸å« gas è´¹ç”¨ | åŸå§‹å®¡æŸ¥ | evm-batch-transfer.js | `totalAmount + totalGasCost > balance` |
| 6 | ERC20 è½¬è´¦ä¸æ£€æŸ¥ ETH ä½™é¢æ˜¯å¦å¤Ÿä»˜ gas | åŸå§‹å®¡æŸ¥ | evm-batch-transfer.js | æ–°å¢ ETH ä½™é¢æ£€æŸ¥ |
| 7 | å¯¼å‡ºå«ç§é’¥çš„æ–‡ä»¶æ— æƒé™é™åˆ¶ | åŸå§‹å®¡æŸ¥ | evm-batch-gen.js | `mode: 0o600` |
| 8 | ç¡¬ç¼–ç å‡ API key | åŸå§‹å®¡æŸ¥ | evm-tx-history.js | åˆ é™¤ï¼Œæ”¹ä¸ºå¿…é¡» `--api-key` |
| 9 | nonce å¤±è´¥åä»é€’å¢ | æ·±åº¦å®¡æŸ¥ R1 | evm-batch-transfer.js | å¤±è´¥æ—¶ä¸é€’å¢ nonce |
| 10 | gasPrice æœªä¼ å…¥äº¤æ˜“å¯¹è±¡ | æ·±åº¦å®¡æŸ¥ R1 | evm-batch-transfer.js | ä¿®å¤ä¼ å‚ |
| 11 | æ–­ç‚¹ç»­ä¼ ç”¨ success è®¡æ•°è€Œéæ€»è®°å½•æ•° | æ·±åº¦å®¡æŸ¥ R2 | evm-batch-transfer.js | æ”¹ç”¨æ€»è®°å½•ç´¢å¼• |
| 12 | sub-wallets å¤‡ä»½æœª chmod 600 | æ·±åº¦å®¡æŸ¥ R2 | evm-backup.sh | æ·»åŠ æƒé™è®¾ç½® |
| 13 | æ–­ç‚¹ç»­ä¼  nonce è¾¹ç•Œï¼ˆäº¤æ˜“ä¸Šé“¾ä½†è¿›åº¦æœªä¿å­˜ï¼‰ | æ·±åº¦å®¡æŸ¥ R3 | evm-batch-transfer.js | æ¢å¤æ—¶æ ¡éªŒé“¾ä¸Š nonce |

### ğŸŸ¡ ä¸­ç­‰ï¼ˆä¼šå¯¼è‡´å´©æºƒæˆ–åŠŸèƒ½å¼‚å¸¸ï¼‰â€” 25 ä¸ª

| # | é—®é¢˜ | æ¥æº | æ–‡ä»¶ | ä¿®å¤æ–¹å¼ |
|---|------|------|------|----------|
| 1 | gasPrice null å´©æºƒï¼ˆEIP-1559 é“¾ï¼‰ | åŸå§‹å®¡æŸ¥ | å¤šä¸ªæ–‡ä»¶ | `gasPrice ?? maxFeePerGas ?? 0n` |
| 2 | ethers v5 APIï¼ˆ`utils.formatEther` ç­‰ï¼‰ | åŸå§‹å®¡æŸ¥ | 5ä¸ªæ–‡ä»¶ | ç»Ÿä¸€ v6 å‘½åå¯¼å…¥ |
| 3 | `mnemonic.locale` å±æ€§ä¸å­˜åœ¨ | åŸå§‹å®¡æŸ¥ | evm-wallet-gen.js | åˆ é™¤ |
| 4 | `tx.to === null` åˆçº¦åˆ›å»ºäº¤æ˜“å´©æºƒ | åŸå§‹å®¡æŸ¥ | evm-tx-history.js | null æ£€æŸ¥ |
| 5 | `--to`/`--amount` å¿…é¡»ç›¸é‚»æ‰èƒ½è§£æ | åŸå§‹å®¡æŸ¥ | evm-batch-transfer.js | ç‹¬ç«‹è§£æ |
| 6 | `.wait()` æ— è¶…æ—¶ï¼Œé“¾æ‹¥å µæ—¶æ°¸ä¹…é˜»å¡ | åŸå§‹å®¡æŸ¥ | batch-transfer, collect | `.wait(1, 120000)` |
| 7 | labels import è¦†ç›–è€Œéåˆå¹¶ | åŸå§‹å®¡æŸ¥ | evm-labels.js | `{ ...existing, ...imported }` |
| 8 | `formatEther` ç”¨äº ERC20 ä½™é¢ä¸è¶³é”™è¯¯ä¿¡æ¯ | åŸå§‹å®¡æŸ¥ | evm-batch-transfer.js | `formatUnits` |
| 9 | batch-query ä»£å¸ decimals æœªå­˜å…¥ results | åŸå§‹å®¡æŸ¥ | evm-batch-query.js | å­˜å…¥ results |
| 10 | `--format` æ—  `--output` é™é»˜å¿½ç•¥ | åŸå§‹å®¡æŸ¥ | evm-batch-gen.js | æŠ¥é”™æç¤º |
| 11 | evm.js ç¼º 4 ä¸ªå­å‘½ä»¤è·¯ç”± | åŸå§‹å®¡æŸ¥ | evm.js | è¡¥é½ batch-query/labels/validate/extract |
| 12 | collect è¦æ±‚ä¸»é’±åŒ…ç§é’¥ï¼ˆå®é™…åªéœ€åœ°å€ï¼‰ | åŸå§‹å®¡æŸ¥ | evm-common.js | `loadMainWallet(requireKey=false)` |
| 13 | collect å­é’±åŒ…æ—  privateKey/address æ ¡éªŒ | åŸå§‹å®¡æŸ¥ | evm-collect.js | å¾ªç¯å‰æ ¡éªŒ |
| 14 | vault è·¯å¾„ç¡¬ç¼–ç ä¸ä¸€è‡´ | åŸå§‹å®¡æŸ¥ | wallet-gen, batch-gen | ç»Ÿä¸€ç”¨ `VAULT_DIR` |
| 15 | evm-init.sh vault è·¯å¾„é”™è¯¯ | åŸå§‹å®¡æŸ¥ | evm-init.sh | å…¨é¢é‡å†™ |
| 16 | evm-backup.sh tar è§£å‹è·¯å¾„é”™è¯¯ | åŸå§‹å®¡æŸ¥ | evm-backup.sh | å…¨é¢é‡å†™ |
| 17 | evm-manager.sh å˜é‡æœªåŠ å¼•å· | åŸå§‹å®¡æŸ¥ | evm-manager.sh | å…¨éƒ¨åŠ å¼•å· |
| 18 | evm-manager.sh æ—  cd SCRIPT_DIR | åŸå§‹å®¡æŸ¥ | evm-manager.sh | æ·»åŠ  |
| 19 | æ–­ç‚¹ç»­ä¼ åœ°å€å»é‡é€»è¾‘é”™è¯¯ | æ·±åº¦å®¡æŸ¥ R1 | evm-batch-transfer.js | é‡å†™å»é‡é€»è¾‘ |
| 20 | tx-history æ— è¶…æ—¶ | æ·±åº¦å®¡æŸ¥ R1 | evm-tx-history.js | æ·»åŠ è¶…æ—¶ |
| 21 | labels å¤§å°å†™ä¸ä¸€è‡´ | æ·±åº¦å®¡æŸ¥ R1 | evm-labels.js | ç»Ÿä¸€å°å†™ |
| 22 | evm-manager è¾“å…¥æ ¡éªŒç¼ºå¤± | æ·±åº¦å®¡æŸ¥ R1 | evm-manager.sh | æ·»åŠ æ ¡éªŒ |
| 23 | ç»­ä¼ è¿›åº¦æ–‡ä»¶ä¸¢å¤±é£é™© | æ·±åº¦å®¡æŸ¥ R2 | evm-batch-transfer.js | åŸå­å†™å…¥ |
| 24 | clearTimeout ä½ç½®ä¸å½“ | æ·±åº¦å®¡æŸ¥ R2 | evm-batch-transfer.js | è°ƒæ•´ä½ç½® |
| 25 | apiKey æœª URL ç¼–ç  | æ·±åº¦å®¡æŸ¥ R2 | evm-tx-history.js | encodeURIComponent |

### ğŸŸ¢ è½»å¾®ï¼ˆä»£ç è´¨é‡/æ€§èƒ½ï¼‰â€” 16 ä¸ª

| # | é—®é¢˜ | æ¥æº | æ–‡ä»¶ | ä¿®å¤æ–¹å¼ |
|---|------|------|------|----------|
| 1 | `parseInt` æ—  NaN æ£€æŸ¥ï¼ˆ3å¤„ï¼‰ | åŸå§‹å®¡æŸ¥ | wallet-gen, batch-gen, tx-history | åŠ æ£€æŸ¥ |
| 2 | JSON.parse æ—  try-catch | åŸå§‹å®¡æŸ¥ | å¤šä¸ªæ–‡ä»¶ | ç»Ÿä¸€ç”¨ `readJSON` |
| 3 | readFileSync æ—  try-catch | åŸå§‹å®¡æŸ¥ | å¤šä¸ªæ–‡ä»¶ | ç»Ÿä¸€ç”¨ `readLines` |
| 4 | ç©ºæ•°ç»„è¶Šç•Œï¼ˆ4å¤„ï¼‰ | åŸå§‹å®¡æŸ¥ | å¤šä¸ªæ–‡ä»¶ | é•¿åº¦æ£€æŸ¥ |
| 5 | æœªä½¿ç”¨çš„ requireï¼ˆfs/pathï¼‰ | åŸå§‹å®¡æŸ¥ | 4ä¸ªæ–‡ä»¶ | æ¸…ç† |
| 6 | `from collections import` åœ¨å‡½æ•°å†…éƒ¨ | åŸå§‹å®¡æŸ¥ | gmgn_monitor.py | ç§»åˆ°æ–‡ä»¶å¤´ |
| 7 | ETH è½¬è´¦æœªæŒ‡å®š gasLimit | åŸå§‹å®¡æŸ¥ | batch-transfer, collect | `gasLimit: 21000n` |
| 8 | getFeeData åœ¨å¾ªç¯å†…é‡å¤è°ƒç”¨ | åŸå§‹å®¡æŸ¥ | evm-collect.js | æåˆ°å¾ªç¯å¤– |
| 9 | ä»£å¸ symbol/decimals æ¯åœ°å€é‡å¤æŸ¥è¯¢ | åŸå§‹å®¡æŸ¥ | evm-batch-query.js | å¾ªç¯å¤–æŸ¥ä¸€æ¬¡ |
| 10 | æ±‡æ€»ç»Ÿè®¡ä» results é‡æŸ¥å·²æœ‰å˜é‡ | åŸå§‹å®¡æŸ¥ | evm-batch-query.js | ç›´æ¥ç”¨å¤–éƒ¨å˜é‡ |
| 11 | labels addLabel æ›´æ–°æ—¶ä¸¢å¤± createdAt | åŸå§‹å®¡æŸ¥ | evm-labels.js | ä¿ç•™åŸ createdAt |
| 12 | CSV å¯¼å‡ºæ— å¼•å·è½¬ä¹‰ | åŸå§‹å®¡æŸ¥ | labels, batch-gen | åŠ  `esc()` å‡½æ•° |
| 13 | saveGasConfig æƒé™æœªè®¾ç½® | æ·±åº¦å®¡æŸ¥ R1 | evm-common.js | å†™å…¥æ—¶ chmod 0o600 |
| 14 | confirmGasCost txCount=0 æœªå¤„ç† | æ·±åº¦å®¡æŸ¥ R1 | evm-common.js | æ·»åŠ é›¶å€¼æ£€æŸ¥ |
| 15 | evm-backup.sh vault chmod é—æ¼ | æ·±åº¦å®¡æŸ¥ R1 | evm-backup.sh | æ¢å¤åé‡è®¾æƒé™ |
| 16 | evm-confirm-service.js ç¡¬ç¼–ç  CHAT_ID | æ·±åº¦å®¡æŸ¥ R4 | evm-confirm-service.js | å·²ç§»é™¤åºŸå¼ƒæ–‡ä»¶ |

### ğŸ“Š é—®é¢˜åˆ†å¸ƒæ€»è§ˆ

```
ä¸¥é‡ ğŸ”´  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  13 ä¸ª (24%)
ä¸­ç­‰ ğŸŸ¡  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  25 ä¸ª (46%)
è½»å¾® ğŸŸ¢  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  16 ä¸ª (30%)
æ€»è®¡     54 ä¸ªæ ¸å¿ƒé—®é¢˜ + ~12 ä¸ª shell è„šæœ¬é™„å±é—®é¢˜ â‰ˆ 60+
```

### é«˜é¢‘é—®é¢˜æ–‡ä»¶ TOP 5

| æ–‡ä»¶ | é—®é¢˜æ•° | è¯´æ˜ |
|------|--------|------|
| evm-batch-transfer.js | 12 | è½¬è´¦æ ¸å¿ƒé€»è¾‘ï¼Œnonce/gas/ç»­ä¼ é—®é¢˜é›†ä¸­ |
| evm-common.js | 5 | å…¬å…±æ¨¡å—ï¼Œå½±å“é¢å¹¿ |
| evm-batch-query.js | 4 | æŸ¥è¯¢ä¼˜åŒ–ç›¸å…³ |
| evm-backup.sh | 3 | Shell è„šæœ¬è´¨é‡é—®é¢˜ |
| evm-tx-history.js | 3 | API è°ƒç”¨å®‰å…¨ |

### å…³é”®æ•™è®­

1. **nonce ç®¡ç†æ˜¯æ‰¹é‡äº¤æ˜“çš„å‘½é—¨**ï¼šä»æœ€åˆçš„å¹¶å‘å†²çªï¼Œåˆ°å¤±è´¥åä»é€’å¢ï¼Œåˆ°æ–­ç‚¹ç»­ä¼ çš„è¾¹ç•Œé—®é¢˜ï¼Œnonce ç›¸å…³ bug è´¯ç©¿ 3 è½®å®¡æŸ¥
2. **æ–­ç‚¹ç»­ä¼ æ¯”æƒ³è±¡ä¸­å¤æ‚**ï¼šåœ°å€å»é‡ã€è¿›åº¦è®¡æ•°ã€åŸå­å†™å…¥ã€nonce æ ¡éªŒâ€”â€”æ¯ä¸€å±‚éƒ½è¸©è¿‡å‘
3. **æƒé™é—®é¢˜å®¹æ˜“é—æ¼**ï¼šç§é’¥æ–‡ä»¶ã€å¤‡ä»½æ–‡ä»¶ã€Gas é…ç½®æ–‡ä»¶ï¼Œå‡¡æ¶‰åŠæ•æ„Ÿæ•°æ®éƒ½éœ€è¦ 0o600
4. **ethers v5â†’v6 è¿ç§»éœ€è¦é€ API éªŒè¯**ï¼šä¸èƒ½å‡è®¾ API å…¼å®¹

---

## æµ‹è¯•

### è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆtest.jsï¼‰

77 ä¸ªç”¨ä¾‹ï¼Œè¦†ç›– 13 ä¸ªæ¨¡å—ï¼š

| æ¨¡å— | ç”¨ä¾‹æ•° | è¦†ç›–èŒƒå›´ |
|------|--------|----------|
| evm-common.js | 11 | å¸¸é‡/è¯»å–/é’±åŒ…åŠ è½½/é˜ˆå€¼/Gasé…ç½®/ä¸‰å±‚ä¿æŠ¤ |
| evm-wallet-gen.js | 6 | ç”Ÿæˆ/åŠ©è®°è¯/å‚æ•°æ ¡éªŒ |
| evm-batch-gen.js | 6 | ç”Ÿæˆ/å¯¼å‡ºæ ¼å¼/ä¸Šé™ |
| evm-validate.js | 5 | æœ‰æ•ˆ/æ— æ•ˆ/æ ¡éªŒå’Œ/æ–‡ä»¶ |
| evm-labels.js | 10 | CRUD/å¯¼å…¥å¯¼å‡º/è¾¹ç•Œ/å¤§å°å†™ |
| evm-extract-addresses.js | 3 | æå–/ç©ºæ•°ç»„/æŸåæ–‡ä»¶ |
| evm-balance.js | 5 | å•æŸ¥/æ‰¹æŸ¥/ä»£å¸ç¼“å­˜/é”™è¯¯ |
| evm-batch-query.js | 4 | æŸ¥è¯¢/Multicall3/é™çº§/å‚æ•°æ ¡éªŒ |
| evm-info.js | 2 | ä¿¡æ¯/éä¸»ç½‘æç¤º |
| evm-tx-history.js | 3 | å‚æ•°æ ¡éªŒ/è¶…æ—¶ |
| evm-batch-transfer.js | 10 | å‚æ•°/åœ°å€/é‡‘é¢/dry-run/æ–­ç‚¹ç»­ä¼ /nonce/gas-price/max-fee |
| evm-collect.js | 7 | å‚æ•°/ç©ºæ–‡ä»¶/å­—æ®µæ ¡éªŒ/Gasä½™é‡/æƒé™ |
| evm.js | 5 | å¸®åŠ©/è·¯ç”±/æœªçŸ¥å‘½ä»¤/ç½‘ç»œåˆ‡æ¢ |

### Sepolia æµ‹è¯•ç½‘å®æµ‹

- æ‰¹é‡è½¬è´¦ 2 ç¬” Ã— 0.001 ETH â†’ âœ… æˆåŠŸ
- å½’é›† 2 ç¬”å›ä¸»åœ°å€ â†’ âœ… æˆåŠŸ
- nonce è¿ç»­é€’å¢æ— å†²çª â†’ âœ…
- gas ä¼°ç®— + 10% ä½™é‡ â†’ âœ…
- 120 ç§’è¶…æ—¶æœºåˆ¶ â†’ âœ…
- æ–­ç‚¹ç»­ä¼ æ¢å¤ â†’ âœ…
- Gas price æ‰‹åŠ¨æŒ‡å®š â†’ âœ…

### Base ä¸»ç½‘å®æµ‹

- 3 ç¬”åˆ†å‘äº¤æ˜“ â†’ âœ… æˆåŠŸ
- 3 ç¬”å½’é›†äº¤æ˜“ â†’ âœ… æˆåŠŸ
- åŒºå—èŒƒå›´ï¼š42667001 - 42667011
- max-fee ç¡¬ä¸Šé™ç”Ÿæ•ˆ â†’ âœ…
- Multicall3 æ‰¹é‡æŸ¥è¯¢ â†’ âœ…

---

## å¤ç›˜ä¸æ”¹è¿›æ–¹å‘

### æœ¬æ¬¡å¼€å‘çš„æ ¸å¿ƒæ•™è®­

1. **ethers v5â†’v6 è¿ç§»ä¸å½»åº•**ï¼šåŸä»£ç æ··ç”¨ v5/v6 APIï¼Œè¯´æ˜è¿ç§»æ—¶æ²¡æœ‰é€æ–‡ä»¶éªŒè¯ã€‚ä»¥åå‡çº§ä¾èµ–åº”è¯¥æœ‰ checklistã€‚

2. **å®‰å…¨æ„è¯†ä¸è¶³**ï¼šsha256 ç”Ÿæˆåœ°å€ã€æ— æƒé™æ§åˆ¶çš„ç§é’¥å¯¼å‡ºã€ç¡¬ç¼–ç å‡ API keyâ€”â€”è¿™äº›éƒ½æ˜¯åŸºæœ¬å®‰å…¨é—®é¢˜ã€‚æ¶‰åŠç§é’¥çš„ä»£ç åº”è¯¥æœ‰ä¸“é—¨çš„å®‰å…¨å®¡æŸ¥æµç¨‹ã€‚

3. **nonce ç®¡ç†æ˜¯æ‰¹é‡äº¤æ˜“çš„å‘½é—¨**ï¼šä»å¹¶å‘å†²çª â†’ å¤±è´¥åä»é€’å¢ â†’ æ–­ç‚¹ç»­ä¼ è¾¹ç•Œé—®é¢˜ï¼Œnonce ç›¸å…³ bug è´¯ç©¿æ•´ä¸ªå¼€å‘å‘¨æœŸï¼Œå…± 4 ä¸ªä¸¥é‡é—®é¢˜ã€‚

4. **æ–­ç‚¹ç»­ä¼ çš„å¤æ‚åº¦è¢«ä½ä¼°**ï¼šåœ°å€å»é‡ã€è¿›åº¦è®¡æ•°æ–¹å¼ã€åŸå­å†™å…¥ã€nonce é“¾ä¸Šæ ¡éªŒâ€”â€”æ¯ä¸€å±‚éƒ½è¸©è¿‡å‘ï¼Œç»å† 3 è½®å®¡æŸ¥æ‰ç¨³å®šã€‚

5. **Gas ç¡®è®¤çš„äº¤äº’è®¾è®¡éœ€è¦é€‚é…è¿è¡Œç¯å¢ƒ**ï¼šç‹¬ç«‹æœåŠ¡ã€AI callbackã€ç¬¬äºŒä¸ª bot éƒ½å¤±è´¥äº†ï¼Œæœ€ç»ˆ"é›¶äº¤äº’ + ç¡¬ä¸Šé™"æ‰æ˜¯ OpenClaw ç¯å¢ƒä¸‹çš„æ­£ç¡®æ–¹æ¡ˆã€‚

6. **Shell è„šæœ¬è´¨é‡å·®**ï¼šè·¯å¾„ç¡¬ç¼–ç ã€å˜é‡ä¸åŠ å¼•å·ã€tar å‘½ä»¤å‚æ•°é”™è¯¯â€”â€”shell è„šæœ¬å®¹æ˜“è¢«å¿½è§†ä½†åŒæ ·éœ€è¦å®¡æŸ¥ã€‚

7. **æƒé™é—®é¢˜å®¹æ˜“é—æ¼**ï¼šç§é’¥æ–‡ä»¶ã€å¤‡ä»½æ–‡ä»¶ã€Gas é…ç½®æ–‡ä»¶ï¼Œå‡¡æ¶‰åŠæ•æ„Ÿæ•°æ®éƒ½éœ€è¦ 0o600ï¼Œéœ€è¦åœ¨ä»£ç å®¡æŸ¥ checklist ä¸­ä¸“é—¨åˆ—å‡ºã€‚

### æ•°æ®æ€»ç»“

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| å®¡æŸ¥è½®æ¬¡ | 18+ |
| ä¿®å¤é—®é¢˜ | 60+ |
| ä¸¥é‡é—®é¢˜ | 13 |
| æµ‹è¯•ç”¨ä¾‹ | 77 |
| é€šè¿‡ç‡ | 100% |
| æ”¯æŒç½‘ç»œ | 6 |
| ä¸»ç½‘éªŒè¯ | Baseï¼ˆ6ç¬”äº¤æ˜“ï¼‰ |

---

## é™„å½•ï¼šè¿ç»´æ‰‹å†Œ

### ä¸€ã€æ—¥å¸¸è¿ç»´

#### 1.1 æŸ¥è¯¢ä½™é¢

```bash
# å•åœ°å€æŸ¥è¯¢ ETH
node scripts/evm-balance.js --address 0x...

# å•åœ°å€æŸ¥è¯¢ ERC20
node scripts/evm-balance.js --address 0x... --token 0xä»£å¸åˆçº¦

# æ‰¹é‡æŸ¥è¯¢ï¼ˆè‡ªåŠ¨å¯ç”¨ Multicall3ï¼Œ3+ åœ°å€ï¼‰
node scripts/evm-batch-query.js --file vault/sub-wallets.json

# æ‰¹é‡æŸ¥è¯¢ ERC20
node scripts/evm-batch-query.js --file vault/sub-wallets.json --token 0xä»£å¸åˆçº¦
```

Telegram å¿«æ·å‘½ä»¤ï¼š`æŸ¥ä½™é¢`ã€`æ‰¹é‡æŸ¥è¯¢`

#### 1.2 æ‰¹é‡è½¬è´¦

```bash
# ETH æ‰¹é‡è½¬è´¦
node scripts/evm-batch-transfer.js \
  --from vault/main-wallet.json \
  --to vault/sub-wallets.json \
  --amount 0.01

# ERC20 æ‰¹é‡è½¬è´¦
node scripts/evm-batch-transfer.js \
  --from vault/main-wallet.json \
  --to vault/sub-wallets.json \
  --amount 100 \
  --token 0xä»£å¸åˆçº¦

# å…ˆé¢„è§ˆï¼ˆä¸å‘äº¤æ˜“ï¼‰
node scripts/evm-batch-transfer.js ... --dry-run

# æ‰‹åŠ¨æŒ‡å®š gas
node scripts/evm-batch-transfer.js ... --gas-price 5

# è®¾ç½®å•ç¬”æœ€å¤§ gas è´¹ç”¨
node scripts/evm-batch-transfer.js ... --max-fee 0.01
```

#### 1.3 èµ„é‡‘å½’é›†

```bash
# ETH å½’é›†åˆ°ä¸»åœ°å€
node scripts/evm-collect.js \
  --to 0xä¸»åœ°å€ \
  --file vault/sub-wallets.json

# ERC20 å½’é›†
node scripts/evm-collect.js \
  --to 0xä¸»åœ°å€ \
  --file vault/sub-wallets.json \
  --token 0xä»£å¸åˆçº¦

# é¢„è§ˆ
node scripts/evm-collect.js ... --dry-run
```

#### 1.4 åˆ‡æ¢ç½‘ç»œ

```bash
# CLI æ–¹å¼
node scripts/evm-balance.js --network base --address 0x...
node scripts/evm-batch-transfer.js --network arbitrum ...

# æ”¯æŒçš„ç½‘ç»œåç§°
# ethereum | base | bnb | arbitrum | polygon | sepolia
```

Telegram å‘½ä»¤ï¼š`åˆ‡æ¢åˆ° base`ã€`ç”¨ arbitrum`

#### 1.5 Gas ç®¡ç†

**Telegram Gas é¢æ¿**ï¼ˆæ¨èï¼‰ï¼š
- å‘é€ `gasè®¾ç½®` æˆ– `gasé¢æ¿` å”¤èµ· inline buttons
- é¢æ¿å¯è®¾ç½® gas priceã€max-feeã€gas war æ¨¡å¼

**Telegram æ–‡æœ¬å‘½ä»¤**ï¼š
- `gas war` â€” å¼€å¯ Gas War æ¨¡å¼ï¼ˆå–æ¶ˆç¡¬ä¸Šé™ï¼‰
- `gas normal` â€” æ¢å¤æ­£å¸¸æ¨¡å¼
- `gas 0.05` â€” è®¾ç½® max-fee ä¸º 0.05 ETH/ç¬”

**CLI å‚æ•°**ï¼š
- `--gas-price 10` â€” æ‰‹åŠ¨æŒ‡å®š 10 Gwei
- `--max-fee 0.01` â€” å•ç¬”ä¸Šé™ 0.01 ETH
- `--gas-war` â€” å–æ¶ˆç¡¬ä¸Šé™

**ä¸‰å±‚ä¿æŠ¤æœºåˆ¶**ï¼š
1. è¶…é˜ˆå€¼è­¦å‘Šï¼ˆæç¤ºå½“å‰ gas åé«˜ï¼‰
2. max-fee ç¡¬ä¸Šé™ï¼ˆé»˜è®¤ 0.005 ETH/ç¬”ï¼Œè¶…è¿‡è‡ªåŠ¨ç»ˆæ­¢ï¼‰
3. Gas War æ¨¡å¼ï¼ˆæ‰‹åŠ¨å–æ¶ˆé™åˆ¶ï¼Œç”¨äºæŠ¢è·‘åœºæ™¯ï¼‰

### äºŒã€é’±åŒ…ç®¡ç†

#### 2.1 ç”Ÿæˆé’±åŒ…

```bash
# ç”Ÿæˆå•ä¸ªéšæœºé’±åŒ…
node scripts/evm-wallet-gen.js

# ä»åŠ©è®°è¯æ´¾ç”Ÿ
node scripts/evm-wallet-gen.js --mnemonic "your twelve words ..."

# æ‰¹é‡ç”Ÿæˆ 10 ä¸ªé’±åŒ…ï¼Œå¯¼å‡º JSON
node scripts/evm-batch-gen.js --count 10 --output vault/sub-wallets.json --format json

# æ‰¹é‡ç”Ÿæˆï¼Œå¯¼å‡º CSV
node scripts/evm-batch-gen.js --count 10 --output vault/sub-wallets.csv --format csv
```

#### 2.2 å¤‡ä»½ä¸æ¢å¤

```bash
# å¤‡ä»½ï¼ˆè‡ªåŠ¨æ‰“åŒ… vault ç›®å½•ï¼‰
bash scripts/evm-backup.sh backup

# æ¢å¤
bash scripts/evm-backup.sh restore backup-2026-02-26.tar.gz

# å¤‡ä»½æ–‡ä»¶è‡ªåŠ¨è®¾ç½® chmod 600
```

é‡è¦ï¼šå¤‡ä»½æ–‡ä»¶åŒ…å«ç§é’¥ï¼ŒåŠ¡å¿…å­˜æ”¾åœ¨å®‰å…¨ä½ç½®ï¼Œä¸è¦ä¸Šä¼ åˆ°äº‘ç«¯æˆ–ç‰ˆæœ¬æ§åˆ¶ã€‚

#### 2.3 æ ‡ç­¾ç®¡ç†

```bash
# æ·»åŠ æ ‡ç­¾
node scripts/evm-labels.js add 0xåœ°å€ "äº¤æ˜“æ‰€çƒ­é’±åŒ…"

# æŸ¥çœ‹æ ‡ç­¾
node scripts/evm-labels.js get 0xåœ°å€

# åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾
node scripts/evm-labels.js list

# åˆ é™¤æ ‡ç­¾
node scripts/evm-labels.js remove 0xåœ°å€

# å¯¼å‡ºæ ‡ç­¾
node scripts/evm-labels.js export labels-backup.json

# å¯¼å…¥æ ‡ç­¾ï¼ˆåˆå¹¶æ¨¡å¼ï¼Œä¸è¦†ç›–å·²æœ‰ï¼‰
node scripts/evm-labels.js import labels-backup.json
```

### ä¸‰ã€æ•…éšœæ’æŸ¥

#### 3.1 Gas è¶…é™æ€ä¹ˆåŠ

**ç°è±¡**ï¼šæç¤º"å½“å‰gasè¶…è¿‡max feeï¼Œè¯·è¾“å…¥ã€gas è®¾ç½®ã€‘å”¤é†’è®¾ç½®é¢æ¿"

**å¤„ç†**ï¼š
1. å‘é€ `gasè®¾ç½®` æ‰“å¼€é¢æ¿ï¼ŒæŸ¥çœ‹å½“å‰ gas ä»·æ ¼
2. å¦‚æœç½‘ç»œç¡®å®æ‹¥å µï¼Œç­‰å¾… gas ä¸‹é™åé‡è¯•
3. å¦‚æœç¡®è®¤è¦æ‰§è¡Œï¼Œè°ƒé«˜ max-feeï¼š`gas 0.05` æˆ– `--max-fee 0.05`
4. ç´§æ€¥æƒ…å†µï¼š`gas war` å–æ¶ˆé™åˆ¶ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰

#### 3.2 äº¤æ˜“å¡ä½æ€ä¹ˆåŠ

**ç°è±¡**ï¼šäº¤æ˜“é•¿æ—¶é—´ pendingï¼Œæœªè¢«æ‰“åŒ…

**å¤„ç†**ï¼š
1. æ£€æŸ¥ gas price æ˜¯å¦è¿‡ä½ï¼šå½“å‰ç½‘ç»œ gas å¯èƒ½å·²ä¸Šæ¶¨
2. ç”¨æ›´é«˜ gas price é‡å‘åŒ nonce äº¤æ˜“ï¼ˆæ›¿æ¢äº¤æ˜“ï¼‰ï¼š
   ```bash
   node scripts/evm-batch-transfer.js ... --gas-price 20
   ```
3. å¦‚æœæ˜¯æ‰¹é‡è½¬è´¦ä¸­æ–­ï¼Œä½¿ç”¨æ–­ç‚¹ç»­ä¼ ï¼š
   ```bash
   node scripts/evm-batch-transfer.js ... --resume
   ```

#### 3.3 æ–­ç‚¹ç»­ä¼ ä½¿ç”¨

**è§¦å‘åœºæ™¯**ï¼šæ‰¹é‡è½¬è´¦ä¸­é€”å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯ã€gas è¶…é™ç­‰ï¼‰

**ä½¿ç”¨æ–¹å¼**ï¼š
```bash
# åœ¨åŸå‘½ä»¤ååŠ  --resume
node scripts/evm-batch-transfer.js \
  --from vault/main-wallet.json \
  --to vault/sub-wallets.json \
  --amount 0.01 \
  --resume
```

**å·¥ä½œåŸç†**ï¼š
- è¿›åº¦æ–‡ä»¶è®°å½•å·²å®Œæˆçš„äº¤æ˜“ç´¢å¼•
- æ¢å¤æ—¶æ ¡éªŒé“¾ä¸Š nonceï¼Œç¡®ä¿ä¸é‡å¤å‘é€
- æ—§è¿›åº¦ append ä¿ç•™ï¼Œä¸è¦†ç›–å†å²è®°å½•
- æ”¯æŒå¤šæ¬¡ä¸­æ–­å’Œæ¢å¤

#### 3.4 å¸¸è§é”™è¯¯åŠè§£å†³

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹å¼ |
|----------|------|----------|
| `insufficient funds` | ETH ä½™é¢ä¸è¶³ï¼ˆå« gasï¼‰ | å……å€¼ ETH æˆ–å‡å°‘è½¬è´¦é‡‘é¢ |
| `nonce too low` | nonce å†²çªï¼Œå¯èƒ½æœ‰ pending äº¤æ˜“ | ç­‰å¾… pending äº¤æ˜“ç¡®è®¤æˆ–ç”¨ --resume |
| `replacement fee too low` | æ›¿æ¢äº¤æ˜“ gas ä¸å¤Ÿé«˜ | æé«˜ --gas-price |
| `execution reverted` | ERC20 åˆçº¦æ‰§è¡Œå¤±è´¥ | æ£€æŸ¥ä»£å¸ä½™é¢å’Œæˆæƒ |
| `network timeout` | RPC èŠ‚ç‚¹è¶…æ—¶ | æ¢ RPC èŠ‚ç‚¹ï¼š`--rpc https://...` |
| `ENOENT vault/...` | é’±åŒ…æ–‡ä»¶ä¸å­˜åœ¨ | è¿è¡Œ `bash scripts/evm-init.sh` åˆå§‹åŒ– |
| `permission denied` | æ–‡ä»¶æƒé™é—®é¢˜ | `chmod 600 vault/*` |

### å››ã€å®‰å…¨è§„èŒƒ

#### 4.1 ç›®å½•ä¸æ–‡ä»¶æƒé™

```bash
# vault ç›®å½•ï¼šä»…æ‰€æœ‰è€…å¯è®¿é—®
chmod 700 vault/
# ç§é’¥æ–‡ä»¶ï¼šä»…æ‰€æœ‰è€…å¯è¯»å†™
chmod 600 vault/*.json
# å¤‡ä»½æ–‡ä»¶ï¼šä»…æ‰€æœ‰è€…å¯è¯»å†™
chmod 600 *.tar.gz
# Gas é…ç½®æ–‡ä»¶ï¼ˆè‡ªåŠ¨è®¾ç½®ï¼‰
# /tmp/evm-gas-config.json â†’ 0o600
```

#### 4.2 ç§é’¥å®‰å…¨

- ç§é’¥æ–‡ä»¶å­˜æ”¾åœ¨ `vault/` ç›®å½•ï¼Œæ°¸ä¸è¿›å…¥ LLM ä¸Šä¸‹æ–‡
- æ‰€æœ‰å¯¼å‡ºæ–‡ä»¶è‡ªåŠ¨è®¾ç½® `mode: 0o600`
- å¤‡ä»½æ–‡ä»¶æ¢å¤åè‡ªåŠ¨é‡è®¾æƒé™

#### 4.3 å¤‡ä»½å®‰å…¨

- å¤‡ä»½æ–‡ä»¶åŒ…å«ç§é’¥ï¼Œç­‰åŒäºèµ„äº§æœ¬èº«
- ä¸è¦å°†å¤‡ä»½ä¸Šä¼ åˆ°ï¼šGitHubã€äº‘ç›˜ã€èŠå¤©è®°å½•
- å»ºè®®ï¼šåŠ å¯†åå­˜å‚¨åˆ°ç¦»çº¿ä»‹è´¨ï¼ˆUç›˜ã€ç¡¬ä»¶é’±åŒ…å¤‡ä»½ï¼‰
- å®šæœŸéªŒè¯å¤‡ä»½å¯æ¢å¤æ€§

#### 4.4 ä¸è¦åšçš„äº‹

| âŒ ç¦æ­¢æ“ä½œ | åŸå›  |
|-------------|------|
| å°† vault/ åŠ å…¥ git | ç§é’¥æ³„éœ² |
| åœ¨èŠå¤©ä¸­å‘é€ç§é’¥/åŠ©è®°è¯ | æ˜æ–‡ä¼ è¾“ä¸å®‰å…¨ |
| ä½¿ç”¨ chmod 777 | ä»»ä½•ç”¨æˆ·å¯è¯»å–ç§é’¥ |
| åœ¨å…¬å…± RPC ä¸Šå¤§é‡æ“ä½œ | å¯èƒ½è¢«é™é€Ÿæˆ–ç›‘æ§ |
| ä¸è®¾ max-fee ç›´æ¥æ‰¹é‡è½¬è´¦ | Gas æš´æ¶¨æ—¶èµ„é‡‘æŸå¤± |
| è·³è¿‡ --dry-run ç›´æ¥æ‰§è¡Œ | æ— æ³•é¢„è§ˆå¯èƒ½çš„é”™è¯¯ |
| åœ¨ä¸»ç½‘æµ‹è¯•æ–°åŠŸèƒ½ | ä½¿ç”¨ Sepolia æµ‹è¯•ç½‘ |

---

*æŠ¥å‘Šæ›´æ–°æ—¶é—´ï¼š2026-02-26 16:31 UTC*
*å®¡æŸ¥è½®æ¬¡ï¼š18+ | ä¿®å¤é—®é¢˜ï¼š60+ | æµ‹è¯•ç”¨ä¾‹ï¼š77 | é€šè¿‡ç‡ï¼š100%*
